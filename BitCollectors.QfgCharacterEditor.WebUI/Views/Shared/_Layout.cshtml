@using System.Reflection
@using BitCollectors.QfgCharacterEditor.WebUI.Controllers
<!DOCTYPE html>
<html>
<head>
    <title>@ViewBag.Title</title>
    <link href="@Url.Content("~/Content/Site.css")" rel="stylesheet" type="text/css" />
    <script src="@Url.Content("~/Scripts/jquery-1.9.1.min.js")" type="text/javascript"></script>
    <script src="@Url.Content("~/Scripts/jquery.validate.min.js")" type="text/javascript"></script>

    <script type="text/javascript">
        function goPage(url) {
            var form = document.getElementById('mainForm');
            form.action = url;
            form.submit();
        }

        function showLoadDialog() {
            document.getElementById('loadDialog').style.display = 'block';
            $('#pageContainer :input').attr('readonly', true);
        }

        function closeLoadDialog() {
            $('#loadDialog').css('display', 'none');
            $('#pageContainer :input').removeAttr('readonly');
        }

        $(function () {
            $("#lnkMaxStats").click(function () { goPage('/Character/MaxStats') });

            $("#lnkSave").click(function () { goPage('/Character/Save') });

            $('#lnkLoad').click(function () { showLoadDialog(); });
            $('#btnLoadCancel').click(function () { closeLoadDialog(); });
            $('#btnLoadOK').click(function () { closeLoadDialog(); });
        });
    </script>
</head>

<body>

    <div id="loadDialog">
        <form action="/Character/Load" method="post" enctype="multipart/form-data">
            <p>
                Select a file to open:
            </p>
            <input type="file" name="file" id="file" />
            <div style="text-align: right; margin-top: 40px;">
                <input type="submit" id="btnLoadOk" value="Load File" />
                <input type="button" id="btnLoadCancel" value="Cancel" />
            </div>
        </form>
    </div>

    <h1>Quest for Glory Character File Editor</h1>

    <div id="menuContainer">
        <a href="#" id="lnkLoad" class="menuButton">
            <img src="/Images/folder.png" alt="" />
            Open
        </a>

        <a href="#" id="lnkSave" class="menuButton">
            <img src="/Images/disk.png" alt="" />
            Save
        </a>

        <span class="menuSeparator">|</span>

        <a href="#" id="lnkMaxStats" class="menuButton">
            <img src="/Images/page_white_get.png" alt="" />
            Max Stats
        </a>

        <div style="clear: both"></div>
    </div>

    <div id="pageContainer">
        <div id="tabContainer">
            <a href="#" @((ViewBag.SelectedTab == "General") ? Html.Raw("class=\"selected\"") : Html.Raw("onclick=\"goPage('/Character/General');return false;\""))>General</a>
            <a href="#" @((ViewBag.SelectedTab == "CharacterStats") ? Html.Raw("class=\"selected\"") : Html.Raw("onclick=\"goPage('/Character/CharacterStats');return false;\""))>Character Stats</a>
            <a href="#" @((ViewBag.SelectedTab == "MagicStats") ? Html.Raw("class=\"selected\"") : Html.Raw("onclick=\"goPage('/Character/MagicStats');return false;\""))>Magic Stats</a>
            <a href="#" @((ViewBag.SelectedTab == "Inventory") ? Html.Raw("class=\"selected\"") : Html.Raw("onclick=\"goPage('/Character/Inventory');return false;\""))>Inventory</a>
        </div>
        <div style="clear: both"></div>
        <div id="tabBodyContainer">
            @RenderBody()
        </div>
        
        <p>
            To download the Windows version, source code, or to find out more information, <a href="http://www.bitcollectors.com/Project/QfgCharacterEditor" target="_blank">please see the project page</a>.
        </p>
        <p>
            Version: @Assembly.GetAssembly(typeof(CharacterController)).GetName().Version.ToString()
            - brought to you by <a href="http://www.bitcollectors.com" target="_blank">BitCollectors</a>.
        </p>
    </div>
</body>
</html>
